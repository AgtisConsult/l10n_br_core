<?xml version="1.0" encoding="utf-8"?>
<openerp>
	<data>
		<record model="ir.ui.view" id="view_l10n_br_fiscal_position_invoice_form">
			<field name="name">l10n_br_fiscal_position.invoice.form</field>
			<field name="model">account.invoice</field>
			<field name="inherit_id" ref="l10n_br_account.view_l10n_br_account_invoice_form" />
			<field name="arch" type="xml">
				<field position="replace" name="fiscal_category_id">
					<field name="fiscal_category_id" on_change="onchange_fiscal_category_id(partner_id, partner_id, company_id, fiscal_category_id)" domain="[('journal_type','in',('sale', 'sale_refund')),('fiscal_type','=','product')]" required="1" />
					<field name="fiscal_position" required="1" domain="[('fiscal_category_id', '=', fiscal_category_id)]" groups="base.group_extended,base.group_user" />
				</field>
				<field name="partner_id" position="attributes">
					<attribute name="on_change">onchange_partner_id(type, partner_id, date_invoice, payment_term, partner_bank_id, company_id, fiscal_category_id)</attribute>
				</field>
				<field position="attributes" name="company_id">
					<attribute name="on_changes">onchange_company_id(company_id, partner_id, type, invoice_line, currency_id, fiscal_category_id)</attribute>
				</field>
			</field>
		</record>
		
		<record model="ir.ui.view" id="view_l10n_br_fiscal_position_invoice_line_form">
			<field name="name">l10n_br_fiscal_position.invoice.line.form</field>
			<field name="model">account.invoice.line</field>
			<field name="inherit_id" ref="l10n_br_account.view_l10n_br_account_invoice_line_form" />
			<field name="arch" type="xml">
				<field name="product_id" position="attributes">
					<attribute name="on_change">product_id_change(product_id, uos_id, quantity, name, parent.type, parent.partner_id, fiscal_position, price_unit, parent.currency_id, context, parent.company_id, parent.fiscal_category_id, parent.fiscal_position)</attribute>
				</field>
				<field name="uos_id" position="attributes">
					<attribute name="on_change">uos_id_change(product_id, uos_id, quantity, name, parent.type, parent.partner_id, parent.fiscal_position, price_unit, parent.currency_id, context, parent.company_id, fiscal_category_id)</attribute>
				</field>
				<field name="fiscal_category_id" position="attributes">
					<attribute name="on_change">onchange_fiscal_category_id(parent.partner_id, parent.company_id, product_id, fiscal_category_id, account_id, context)</attribute>
				</field>
				<field name="cfop_id" position="before">
					<field name="fiscal_position" required="1" domain="[('fiscal_category_id', '=', fiscal_category_id)]" on_change="onchange_fiscal_position(parent.partner_id, parent.company_id, product_id, fiscal_category_id, account_id, context)" />
				</field>
				<field name="account_id" position="attributes">
					<attribute name="on_change">onchange_account_id(product_id, parent.partner_id, parent.type, parent.fiscal_position,account_id, context, fiscal_category_id, parent.company_id)</attribute>
				</field>
			</field>
		</record>
		
		<record model="ir.ui.view" id="l10n_br_fiscal_position_invoice_supplier_form">
			<field name="name">l10n_br_fiscal_position.invoice.supplier.form</field>
			<field name="model">account.invoice</field>
			<field name="inherit_id" ref="l10n_br_account.l10n_br_account_invoice_supplier_form" />
			<field name="arch" type="xml">
				<field name="partner_id" position="attributes">
					<attribute name="on_change">onchange_partner_id(type, partner_id, date_invoice, payment_term, partner_bank_id, company_id, fiscal_category_id)</attribute>
				</field>
				<field position="attributes" name="company_id">
					<attribute name="on_changes">onchange_company_id(company_id, partner_id, type, invoice_line, currency_id, fiscal_category_id)</attribute>
				</field>
				<field position="replace" name="fiscal_category_id">
					<field name="fiscal_category_id" on_change="onchange_fiscal_category_id(partner_id, partner_id, company_id, fiscal_category_id)" domain="[('journal_type','in',('sale', 'sale_refund')),('fiscal_type','=','product')]" required="1" />
					<field name="fiscal_position" required="1" domain="[('fiscal_category_id', '=', fiscal_category_id)]" groups="base.group_extended,base.group_user" />
				</field>
			</field>
		</record>
	</data>
</openerp>
